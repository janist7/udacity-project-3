# Report generator

## Description

This python project generates a report from a database.

### Prerequisites

Requires a [vagrant](https://www.vagrantup.com/downloads.html) virtual machine.
And [python3](https://www.python.org/downloads/) installed on virtual machine.
A [postgresql](https://www.postgresql.org/download/) database and imported sql data.
Vagrant enviroment should be biult using the vagrantfile that is in the project.

## Instalation and usage

The report can be generated by running ``` python3 report.py ``` or by running ``` python3 reportpage.py ``` in /report and
then opening http://localhost:8000/report/.

## Needed views

```CREATE VIEW popular_article_authors AS
    	SELECT name as author_name, count(logs_sub.path) as author_views
    	FROM articles,authors,
	        (SELECT path
	        FROM log
	        WHERE status = '200 OK'
	        AND path <> '/') as logs_sub
    	WHERE logs_sub.path = concat('/article/',slug)
    	AND author = authors.id
    	GROUP BY name
    	ORDER BY author_views DESC;

 	CREATE VIEW log_day AS
        SELECT
            TO_CHAR(time,'Month DD, YYYY') as f_time_day,
            count(status) as num_day
        FROM log
        WHERE status <> '200 OK'
        AND path <> '/'
        GROUP BY f_time_day;

	CREATE VIEW log_all AS
        SELECT
            TO_CHAR(time,'Month DD, YYYY') as f_time_all,
            count(status) as num_all
        FROM log
        GROUP BY f_time_all;

	CREATE VIEW error_percent AS
    	SELECT
        	f_time_day as day,
        	trunc(CAST(num_day AS DECIMAL)/CAST(num_all AS DECIMAL)*100,2) as percent
    	FROM log_day,log_all
    	WHERE f_time_day = f_time_all
    	GROUP BY f_time_day,num_day,num_all
    	ORDER BY percent DESC;
```

## Authors

* **Jānis Tidriķis** - *Initial work*

## License

This project is licensed under the GPLv3 License - see the [LICENSE.md](https://github.com/janist7/udacity-movie-site/blob/master/LICENSE) file for details

## Acknowledgments and Thanks

Thanks to Billie Thompson for providing a nice readme [template](https://gist.github.com/PurpleBooth/109311bb0361f32d87a2)